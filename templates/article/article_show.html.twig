{% extends 'base.html.twig' %}

{% block title %}Article{% endblock %}

{% block body_id 'article_show' %}
    
{% block main %}
    <h1>{{ article.title|upper }}
        <div style="float: right;"><a href="{{ path('article_edit', {id: article.id}) }}" class="btn btn-xs btn-warning">Edit</a></div>
        <div style="float: right;"><a href="{{ path('article_delete', {id: article.id}) }}" class="btn btn-xs btn-danger">Delete</a></div>
    </h1>

    <p class="post-metadata">
        <span class="metadata"><i class="fa fa-calendar"></i> {{ article.publishedAt|date("m/d/Y") }}</span>
        <span class="metadata"><i class="fa fa-user"></i> by {{ article.author.fullName }}</span>
    </p>

    <p>Category: {{ article.category.title }}</p>

    <p>Tags:<br/>
        {% for tag in article.tags %}
            <a href="{{- path('tag_show', {id: tag.id}) -}}" class="btn btn-outline-primary btn-sm">{{ tag.name }}</a>
        {% endfor %}
    </p>

    <p>{{ article.body }}</p>

    <div id="article-add-comment" class="well">
        <h3>Add Comment</h3>
        {{ render(controller('App\\Controller\\ArticleController::commentForm', {'id': article.id})) }}
    </div>

    <h3>
        Total comments: {{ article.comments|length }}
    </h3>
    {% for comment in article.comments %}
        <div class="row article-comment">
            <a name="comment_{{ comment.id }}"></a>
            <div class="col-sm-4">
                <h4>{{ comment.author.fullName }}</h4> (<i>{{ comment.publishedAt|date("m/d/Y") }}</i>)
            </div>
            <div class="col-sm-8">
                {{ comment.content }}
            </div>
        </div>
    {% else %}
        <div class="article-comment">
            <p>Not comments</p>
        </div>
    {% endfor %}
    
{% endblock %}
